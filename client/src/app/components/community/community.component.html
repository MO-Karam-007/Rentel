<div class="flex h-screen pb-8">
  <!-- Left Sidebar (1/4 width, fixed) -->
  <div class="w-1/4 right-sidebar p-2 space-y-4">
    <div class="bg-white p-4">
      <h2 class="text-2xl font-semibold mb-4">Popular Rentals</h2>
      <ul>
        <!-- Corrected the loop syntax -->
        @for (item of [1,2,3,4]; track $index) {
        <li class="mb-3">
          <a href="#" class="text-blue-600 hover:underline"
            >Luxurious Beachfront Villa</a
          >
          <p class="text-gray-600">3 beds | 2 baths | $250/night</p>
        </li>
        }
      </ul>
    </div>

    <section class="mt-6">
      <h2 class="text-base font-medium text-gray-900">Trending Hashtags</h2>
      <div class="mt-4">
        <div class="flex flex-wrap">
          <a
            href="#"
            class="mr-2 mb-2 inline-block rounded-full bg-blue-100 px-3 py-1 text-sm font-semibold text-blue-800"
            >#ApartmentsForRent</a
          >
          <a
            href="#"
            class="mr-2 mb-2 inline-block rounded-full bg-blue-100 px-3 py-1 text-sm font-semibold text-blue-800"
            >#LuxuryRentals</a
          >
          <a
            href="#"
            class="mr-2 mb-2 inline-block rounded-full bg-blue-100 px-3 py-1 text-sm font-semibold text-blue-800"
            >#AffordableHousing</a
          >
          <a
            href="#"
            class="mr-2 mb-2 inline-block rounded-full bg-blue-100 px-3 py-1 text-sm font-semibold text-blue-800"
            >#PetFriendlyRentals</a
          >
        </div>
      </div>
    </section>
  </div>

  <!-- Main Content (1/2 width, scrollable) -->
  <div class="w-1/2 h-full pb-8">
    <div class="p-4">
      <!-- Post Creation Section -->
      <div
        class="w-full flex flex-col gap-5 p-2 border shadow-lg rounded-xl mx-2 bg-white dark:border-gray-400 dark:bg-gray-800"
      >
        <div class="flex items-center justify-center gap-2">
          <textarea
            rows="1"
            class="w-full resize-none border border-gray-400 rounded-xl p-4 text-left dark:bg-gray-700 dark:text-white dark:border-gray-500"
            placeholder="Start a post, try writing with AI"
          ></textarea>
        </div>
        <button
          class="float-right ml-auto px-5 py-2 rounded-lg hover:bg-gray-100 text-gray-900 font-semibold shadow"
          (click)="openPostDialog()"
        >
          Post
        </button>
      </div>

      <!-- Posts Section -->
      <div
        class="disable-scrolling space-y-5 max-h-[500px] overflow-y-auto font-bold mb-4 rounded p-5"
      >
        <div class="flex flex-col gap-3 p-4 mb-10">
          <!-- Loading Indicator -->
          <div *ngIf="loading" class="flex justify-center items-center h-64">
            <div class="loader"></div>
          </div>

          <!-- Post Cards -->
          <div *ngIf="!loading">
            <div
              *ngFor="let post of posts"
              class="flex flex-col gap-3 p-4 border mb-10"
            >
              <div
                test-id="card-header"
                class="flex justify-between items-center"
              >
                <div class="flex items-center gap-3">
                  <div class="min-w-0 flex-1">
                    <p class="font-bold text-gray-900">
                      <a href="#">{{ post.creator?.username }}</a>
                    </p>
                    <p class="text-gray-500">
                      <a href="#"
                        >&#64;{{
                          post.creator?.name?.toLowerCase().replace(" ", "")
                        }}</a
                      >
                    </p>
                  </div>
                </div>

                <!-- Follow Button Removed to match UI adjustments -->
              </div>

              <div test-id="card-body">
                <h2 class="text-xl font-semibold">{{ post.title }}</h2>
                <p class="text-gray-600 mt-2">{{ post.description }}</p>
              </div>

              <hr class="h-1" />

              <div
                class="flex justify-between text-sm gap-5"
                test-id="card-actions"
              >
                <div>
                  <p
                    class="inline-flex items-center rounded-xl bg-red-600 px-1.5 py-1 text-xs text-white ml-2"
                  >
                    Category
                  </p>
                </div>
                <div>
                  <button
                    class="border-2 px-3 py-1 mr-2 rounded-lg hover:bg-gray-400 text-gray-900 font-semibold shadow"
                    (click)="openItemDialog(post.id)"
                  >
                    Offer
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Remove Avatar Image from Dashboard -->
        <!-- Properly Implement Logout Page Link -->
      </div>
    </div>
  </div>
</div>

<!-- Date Handling -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const startDate = document.querySelector("#startDate");
    const endDate = document.querySelector("#endDate");

    // Set minimum start date to today
    const today = new Date().toISOString().split("T")[0];
    startDate.setAttribute("min", today);

    // Ensure end date is always greater than start date
    startDate.addEventListener("change", function () {
      endDate.setAttribute("min", this.value);
    });
  });
</script>
